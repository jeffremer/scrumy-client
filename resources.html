<!DOCTYPE html>
<html>
<head>
  <meta http-equiv="content-type" content="text/html;charset=utf-8">
  <title>resources.rb</title>
  <link rel="stylesheet" href="http://github.com/jashkenas/docco/raw/0.3.0/resources/docco.css">
</head>
<body>
<div id='container'>
  <div id="background"></div>
  <div id="jump_to">
    Jump To &hellip;
    <div id="jump_wrapper">
      <div id="jump_page">
          <a class="source" href="resources.html">resources.rb</a>
          <a class="source" href="scrumy.html">scrumy.rb</a>
      </div>
    </div>
  </div>
  <table cellspacing=0 cellpadding=0>
  <thead>
    <tr>
      <th class=docs><h1>resources.rb</h1></th>
      <th class=code></th>
    </tr>
  </thead>
  <tbody>
    <tr id='section-Models'>
      <td class=docs>
        <div class="pilwrap">
          <a class="pilcrow" href="#section-Models">&#182;</a>
        </div>
        <h1>Models</h1>

<p>Scrumy defines several models, each of which have a corresponding REST resource.</p>

<ul>
<li>Scrumy</li>
<li>Sprint</li>
<li>Story</li>
<li>Task</li>
<li>Scrumer</li>
<li>Snapshot (not yet implemented)</li>
</ul>


<p>For now the models are explicitly defined using a resource DSL.</p>
      </td>
      <td class=code>
        <div class='highlight'><pre><span class="n">resource</span> <span class="ss">:scrumy</span> <span class="k">do</span>
  <span class="n">show</span> <span class="s2">&quot;https://scrumy.com/api/scrumies/:project.json&quot;</span>
  <span class="n">lazy_load</span> <span class="ss">:sprint</span>
<span class="k">end</span>  

<span class="n">resource</span> <span class="ss">:sprint</span> <span class="k">do</span>
  <span class="n">list</span>      <span class="s2">&quot;https://scrumy.com/api/scrumies/:project/sprints.json&quot;</span>
  <span class="n">current</span>   <span class="s2">&quot;https://scrumy.com/api/scrumies/:project/sprints/current.json&quot;</span>
  <span class="n">show</span>      <span class="s2">&quot;https://scrumy.com/api/sprints/:id.json&quot;</span>
  
  <span class="n">lazy_load</span> <span class="ss">:stories</span>
<span class="k">end</span> 

<span class="n">resource</span> <span class="ss">:story</span> <span class="k">do</span>
  <span class="n">list</span> <span class="s2">&quot;https://scrumy.com/api/sprints/:id/stories.json&quot;</span>
  <span class="n">show</span> <span class="s2">&quot;https://scrumy.com/api/stories/:id.json&quot;</span>

  <span class="n">lazy_load</span> <span class="ss">:tasks</span>
<span class="k">end</span>

<span class="n">resource</span> <span class="ss">:task</span> <span class="k">do</span>
  <span class="n">list</span> <span class="s2">&quot;https://scrumy.com/api/stories/:id/tasks.json&quot;</span>
  <span class="n">show</span> <span class="s2">&quot;https://scrumy.com/api/tasks/:id.json&quot;</span>

  <span class="n">lazy_load</span> <span class="ss">:scrumer</span>

  <span class="n">helper</span> <span class="ss">:time</span> <span class="k">do</span></pre></div>
      </td>
    </tr>
    <tr id='section-2'>
      <td class=docs>
        <div class="pilwrap">
          <a class="pilcrow" href="#section-2">&#182;</a>
        </div>
        <p>Gets the time out of the title instance variable
and converts it into hours or fractions thereof</p>

      </td>
      <td class=code>
        <div class='highlight'><pre>    <span class="k">return</span> <span class="mi">3</span><span class="o">.</span><span class="mi">0</span> <span class="k">if</span> <span class="o">!</span><span class="p">(</span><span class="vi">@title</span> <span class="o">=~</span> <span class="sr">/\((\d+.*)([hHmM].*)\)/</span><span class="p">)</span>      
    <span class="n">time</span><span class="p">,</span> <span class="n">unit</span> <span class="o">=</span> <span class="vg">$~</span><span class="o">.</span><span class="n">captures</span>
    <span class="n">unit</span> <span class="o">=~</span> <span class="sr">/m/i</span> <span class="p">?</span> <span class="n">time</span><span class="o">.</span><span class="n">to_f</span> <span class="o">/</span> <span class="mi">60</span><span class="o">.</span><span class="mi">0</span> <span class="p">:</span> <span class="n">time</span><span class="o">.</span><span class="n">to_f</span>      
  <span class="k">end</span>
<span class="k">end</span>

<span class="n">resource</span> <span class="ss">:scrumer</span> <span class="k">do</span>
  <span class="n">list</span> <span class="s2">&quot;https://scrumy.com/api/scrumies/:project/scrumers.json&quot;</span>
  <span class="n">show</span> <span class="s2">&quot;https://scrumy.com/api/scrumers/:id.json&quot;</span>
  
  <span class="n">helper</span> <span class="ss">:id</span> <span class="k">do</span>
    <span class="vi">@name</span>
  <span class="k">end</span>
<span class="k">end</span>

<span class="n">resource</span> <span class="ss">:snapshot</span> <span class="k">do</span>
  <span class="n">list</span> <span class="s2">&quot;https://scrumy.com/api/sprints/:id/snapshots.json&quot;</span>
  <span class="n">show</span> <span class="s2">&quot;https://scrumy.com/api/snapshots/:id.json&quot;</span>
<span class="k">end</span>  </pre></div>
      </td>
    </tr>
  </table>
</div>
</body>
